// proto/kv/v1/kv.proto
edition = "2023";

package kv.v1;

option go_package = "gen/go/kv/v1;kvv1";

// KVService provides simple key-value storage operations
service KVService {
  // Get retrieves a value by key
  rpc Get(GetRequest) returns (GetResponse);

  // Put stores a key-value pair
  rpc Put(PutRequest) returns (PutResponse);

  rpc Watch(WatchRequest) returns (stream WatchResponse);
}

// GetRequest contains the key to retrieve
message GetRequest {
  string key = 1;
}

// GetResponse contains the retrieved value
message GetResponse {
  string value = 1;
}

// PutRequest contains the key-value pair to store
message PutRequest {
  string key = 1;
  string value = 2;
}

// PutResponse indicates success of the put operation
message PutResponse {
  bool success = 1;
}
message WatchRequest {
  string key = 1;
}

message WatchResponse {
  string key = 1;
  string value = 2;
  string user_id = 3; // who performed the update
  int64 timestamp = 4;
}
